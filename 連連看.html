<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <title>連連看</title>
     <style> 
        * {
            margin: 0;
            padding: 0;
         } 
        @import url(https://fonts.googleapis.com/earlyaccess/cwtexyen.css);
         body{
            font-family: 'cwTeXYen', sans-serif;
            color:white;
         }
         html { width: 100%; height: 100%; background: #222; overflow: hidden; } 
         .wrapper { background-size: 100% 100%; margin: 10px auto; position: relative; /* border: 1px solid #f40; */ } 
         .square { cursor: pointer; position: absolute; width: 100px; height: 100px; background-size: cover; } 
         
         .heart{
             height: 40pt;
             width: auto;
         }
         @keyframes ldio-lj9buv3nvbd-1 {
            0% { transform: rotate(0deg) }
            50% { transform: rotate(-45deg) }
            100% { transform: rotate(0deg) }
            }
            @keyframes ldio-lj9buv3nvbd-2 {
            0% { transform: rotate(180deg) }
            50% { transform: rotate(225deg) }
            100% { transform: rotate(180deg) }
            }
            .ldio-lj9buv3nvbd > div:nth-child(2) {
            transform: translate(-15px,0);
          }
          .ldio-lj9buv3nvbd > div:nth-child(2) div {
            position: absolute;
              top: 38.199999999999996px;
              left: 38.199999999999996px;
              width: 114.6px;
              height: 57.3px;
              border-radius: 114.6px 114.6px 0 0;
              background: #d963a1;
              animation: ldio-lj9buv3nvbd-1 0.9803921568627451s linear infinite;
              transform-origin: 57.3px 57.3px
            }
            .ldio-lj9buv3nvbd > div:nth-child(2) div:nth-child(2) {
              animation: ldio-lj9buv3nvbd-2 0.9803921568627451s linear infinite
            }
            .ldio-lj9buv3nvbd > div:nth-child(2) div:nth-child(3) {
              transform: rotate(-90deg);
              animation: none;
            }@keyframes ldio-lj9buv3nvbd-3 {
                0% { transform: translate(181.45px,0); opacity: 0 }
              20% { opacity: 1 }
              100% { transform: translate(66.85px,0); opacity: 1 }
            }
            .ldio-lj9buv3nvbd > div:nth-child(1) {
              display: block;
            }
            .ldio-lj9buv3nvbd > div:nth-child(1) div {
              position: absolute;
              top: 87.86px;
              left: -7.64px;
              width: 15.28px;
              height: 15.28px;
              border-radius: 50%;
              background: #f2f2f2;
              animation: ldio-lj9buv3nvbd-3 0.9803921568627451s linear infinite
            }
            .ldio-lj9buv3nvbd > div:nth-child(1) div:nth-child(1) { animation-delay: -0.6834s }
            .ldio-lj9buv3nvbd > div:nth-child(1) div:nth-child(2) { animation-delay: -0.3366s }
            .ldio-lj9buv3nvbd > div:nth-child(1) div:nth-child(3) { animation-delay: 0s }
            .loadingio-spinner-bean-eater-erudwnf2kxv {
              width: 191px;
              height: 191px;
              display: inline-block;
              overflow: hidden;
              background: #0e151e;
            }
            .ldio-lj9buv3nvbd {
              width: 100%;
              height: 100%;
              position: relative;
              transform: translateZ(0) scale(1);
              backface-visibility: hidden;
              transform-origin: 0 0; /* see note above */
            }
            .ldio-lj9buv3nvbd div { box-sizing: content-box; }
            /* generated by https://loading.io/ */
    </style> 
</head> 
<body id="Body">
    <div class="loadingio-spinner-bean-eater-erudwnf2kxv" style="position:fixed; height:100%; width:100%;z-index:999;"><div class="ldio-lj9buv3nvbd">
        <div><div></div><div></div><div></div></div><div><div></div><div></div><div></div></div>
        <p>網頁讀取中，請耐心等待(☍﹏⁰)</p>
    </div></div>
    <br>
    <br>
    <div style="font-size: 20px; text-align: center; color: white">
        請將動作＆對應的舞風配對～～
    </div>
    <div style="font-size: 20px; left: 10%; color: white; top:50%; position: absolute;">
        你的命還剩：
        <img id="firstheart" class="heart" src="like.png">
        <img id="secondheart" class="heart" src="like.png">
    </div>
    <div class="wrapper">

    </div>
    
    

     <script>
        var myimg, wrong, win, clickkk;
        var wrap = document.getElementsByClassName('wrapper')[0];
        var rows = 3; // 創建連連看行數 
        var cols = 4; // 創建連連看列數 
        var type1=6;
        var type2 = 6; //選擇多少種圖片，0-24都可以 看自己心情 數字大種類多 數字小種類少遊戲難度更簡單 
        var squareSet = []; // 生成小方塊的數組 
        var chooseOne = null; // 
        var chooseTwo = null; // 
        var Toward = { node: null,
                        up: { row: -1, col: 0 },
                        right: { row: 0, col: 1 },
                        down: { row: 1, col: 0 },
                        left: { row: 0, col: -1 }
                    } 
        window.onload = function () {
            //$("#lose").hide();
            $(".loadingio-spinner-bean-eater-erudwnf2kxv").fadeOut(3000);
            wrong=0;
            init(); //初始化
            setTimeout('window.alert("記住！你只有兩次機會！！")',3000);
            setTimeout('window.alert("！！兩次！！")',3000);
        } 
        function init() {
            if (rows * cols % 2 != 0) { //判斷小方塊總數是否為奇數，奇數就不執行 
                alert('展示數量不能為奇數') // 彈出提示，阻塞js加載 
            }
            initSquareSet(); 
        }
        
        function initSquareSet() { // 方塊默認長寬都是80px 
            wrap.style.height = rows * 100 + 'px'; // 外面盒子的總高度 
            wrap.style.width = cols * 100 + 'px'; // 外面盒子的總寬度 
            var oDiv = document.createElement('div');
            var tmp1 = createRandomNum();
            var tmp2 = createRandomNum();
            //生成隨機數數組 我的圖片名稱是0.jpg~24.jpg 函數生成0~24隨機數就可以通過字符串拼接動態的選擇圖片 
            
            squareSet = new Array(rows + 2); // 生成小方塊的數組 既有行又有列 我們就要利用for循環生成二維數組 57~60 
            for (var i = 0; i < squareSet.length; i++) {
                squareSet[i] = new Array(cols + 2);
            } 
            for (var i = 1; i <= rows; i++) {// 生成行數
                for (var j = 1; j <= cols; j+=2) {// 生成列數 同理 
                    var temp = createSquare(tmp1.pop(), i, j); // 參數每次取隨機數數組的最後一位 i小方塊在整體中行的位置j是列的位置 temp接收這個返回的DOM元素 
                    var temp2= createSquare2(tmp2.pop(), i, j+1);
                    squareSet[i][j] = temp;
                    squareSet[i][j+1] = temp2;
                    wrap.append(temp);
                    wrap.append(temp2);
                    wrong=0;
                    win=0;
                    clickkk=0;
                    
                    temp.onclick = function () {
                        clickkk++;
                        if (chooseOne == null || chooseOne.num != this.num) { // 判斷是第一次點擊還是第二次 77~81 沒有值或者說沒有屬性的都是第一次點擊
                            if(chooseOne != null && chooseOne.num != this.num){
                                console.log("before: "+wrong);
                                wrong++;
                                console.log("after: "+wrong);
                            }
                            chooseOne = this; 
                            console.log("1");
                            
                        } 
                        else {
                            chooseTwo = this;
                            if (chooseOne != chooseTwo && chooseOne.num == chooseTwo.num && chooseTwo.c=="j") { //判斷第一次和第二次點擊不是同一個 並且num值相等 以及是否在路徑上可以消除 
                                clearSquare(chooseOne.row, chooseOne.col);
                                clearSquare(chooseTwo.row, chooseTwo.col);
                                console.log("2");
                                win++;
                            }
                            chooseOne = null;
                            chooseTwo = null; 
                        }
                        render(); // 點擊方塊變換樣式
                        if(wrong==2){
                            document.getElementById("Body").innerHTML='<img src="You_Lose.gif" class="animated bounceInDown" style="height:100%; width:100%; z-index: 1;">';
                        }
                        if(win==6){
                            document.getElementById("Body").innerHTML='<img src="win.gif" class="animated bounceInDown" style="height:100%; width:100%; z-index: 1;">';
                        }
                        console.log("click: "+clickkk);
                    }
                    
                    temp2.onclick = function () {
                        clickkk++;
                        if (chooseOne == null || chooseOne.num != this.num) { // 判斷是第一次點擊還是第二次 77~81 沒有值或者說沒有屬性的都是第一次點擊
                            if(chooseOne != null && chooseOne.num != this.num){ 
                                console.log("before: "+wrong);
                                wrong++;
                                console.log("after: "+wrong);
                            }
                            chooseOne = this; 
                            console.log("3");
                        } 
                        else {
                            chooseTwo = this;
                            if (chooseOne != chooseTwo && chooseOne.num == chooseTwo.num && chooseTwo.c=="g") { //判斷第一次和第二次點擊不是同一個 並且num值相等 以及是否在路徑上可以消除 
                                clearSquare(chooseOne.row, chooseOne.col);
                                clearSquare(chooseTwo.row, chooseTwo.col);
                                console.log("4");
                                win++;
                            }
                            chooseOne = null;
                            chooseTwo = null; 
                        }
                        render(); // 點擊方塊變換樣式 
                        if(wrong==1){
                                    $("#firstheart").hide();
                                }
                                if(wrong==2){
                                    $("#secondheart").hide();
                                }
                        if(wrong==2){
                            document.getElementById("Body").innerHTML='<img id="lose" src="You_Lose.gif" class="animated bounceInDown" style="height:100%; width:100%; z-index: 1;">';
                        
                        }
                        if(win==6){
                            document.getElementById("Body").innerHTML='<img id="lose" src="win.gif" class="animated bounceInDown" style="height:100%; width:100%; z-index: 1;">';
                        }
                        console.log("click: "+clickkk);
                    }
                    
                } 
            } 
        } 
        
        function createRandomNum() {
            var tmp = [0, 1, 2, 3, 4, 5]; // 存放生成圖片是 字符串拼接的數字 
            // rows * cols 可以算出需要多少張圖片 然後除以2 因為每張圖片都是成對出現的 即 7*12=84張圖片 84/2=41算出有42對 
            console.log(tmp); // 看看生成的數組 可以看到成對的隨機數字數組 
            
            tmp.sort(function () {
                return Math.random() - 0.5; //可以打亂數組 
            }) // 
            console.log(tmp); // 看看生成的數組 可以看到已經不成對的隨機數字數組 
            return tmp; // 將數組返回回去 
        } 
        
        function createSquare(num, row, col) {
            var temp = document.createElement('div');
            temp.classList.add('square');
            temp.style.backgroundImage = "url('" + num + ".jpg')";
            temp.style.top = row * 100 + 'px'; // 生成方塊的位置 96,97
            temp.style.left = col * 100 + 'px';
            temp.num = num; //設置小方塊的隨機數屬性 到時候可以用來判斷屬性是否一樣來判斷是否消除小方塊
            temp.col = col;
            temp.row = row;
            temp.c="j";
            return temp; //返回了一個帶著屬性的DOM元素
        } 
        
        function createSquare2(num, row, col) {
            var temp = document.createElement('div');
            temp.classList.add('square');
            temp.style.backgroundImage = "url('" + num + ".gif')";
            temp.style.top = row * 100 + 'px'; // 生成方塊的位置 96,97
            temp.style.left = col * 100 + 'px';
            temp.num = num; //設置小方塊的隨機數屬性 到時候可以用來判斷屬性是否一樣來判斷是否消除小方塊
            temp.col = col;
            temp.row = row;
            temp.c="g";
            return temp; //返回了一個帶著屬性的DOM元素
        } 
        
        function render() {
            for (var i = 0; i < squareSet.length; i++) { //做一個樣式的切換 
                for (var j = 0; j < squareSet[i].length; j++) {
                    if (squareSet[i][j] && squareSet[i][j] == chooseOne) {
                        squareSet[i][j].style.opacity = '0.5';
                    }
                    else if (squareSet[i][j]) {
                        squareSet[i][j].style.opacity = '1';
                    }
                }
            }
        }
        
        function clearSquare(x, y) {
            wrap.removeChild(squareSet[x][y]); // 刪除方塊
            squareSet[x][y] = null;
            
        } 
        
    </script> 
    
</body> 
    
</html>